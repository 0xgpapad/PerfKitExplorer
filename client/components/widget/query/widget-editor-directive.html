<div style="height:100%">
  <div style="height:100%">
    <div class="perfkit-footer-open" style="display:table; height:100%; width: 100%">
      <div class="perfkit-footer-toolbar">
        <div class="perfkit-footer-toolbar-cell">
          <span class="glyphicon glyphicon-remove perfkit-glyph-button perfkit-footer-button"
                ng-click="footerCtrl.closeCodeEditor()"></span>
          <div class="btn-group perfkit-toolbar-section">
            <button type="button" class="btn btn-default"
                 ng-model="footerCtrl.settings.selectedMode"
                 ng-repeat="mode in footerCtrl.settings.modes"
                 btn-radio="mode">{{ mode }}</button>
          </div>
          <div class="perfkit-toolbar-section" ng-switch="footerCtrl.settings.selectedMode">
            <div ng-switch-when="JSON">
              <button type="button" class="btn btn-primary"
                      ng-click="footerCtrl.dashboard.refreshWidget(footerCtrl.dashboard.selectedWidget)">
                Refresh
              </button>
            </div>
            <div ng-switch-when="SQL">
              <button type="button" class="btn btn-primary"
                      ng-click="footerCtrl.dashboard.refreshWidget(footerCtrl.dashboard.selectedWidget)">
                Refresh
              </button>
              <button type="button" class="btn btn-default"
                      ng-show="!footerCtrl.dashboard.selectedWidget.model.datasource.custom_query"
                      ng-click="footerCtrl.explorer.customizeSql()">
                Edit SQL
              </button>
              <button type="button" class="btn btn-default"
                      ng-show="footerCtrl.dashboard.selectedWidget && footerCtrl.dashboard.selectedWidget.model.datasource.custom_query"
                      ng-click="footerCtrl.explorer.restoreBuilder()">
                Use SQL Builder
              </button>
            </div>
            <div ng-switch-when="LOG">
              <button type="button" class="btn btn-default"
                      ng-show="footerCtrl.explorer.errorService.errors.length > 0"
                      ng-click="footerCtrl.explorer.errorService.removeAllErrors()">
                Clear {{ footerCtrl.explorer.errorService.errors.length }} warning<span ng-show="footerCtrl.explorer.errorService.errors.length > 1">s</span>
              </button>
            </div>
          </div>
        </div>

      </div>
      <div ng-switch="footerCtrl.settings.selectedMode" class="perfkit-footer-body">
        <div class="perfkit-footer-body-cell">
          <div ng-switch-when="JSON" fill>
            <div>
              <textarea codemirror="footerCtrl.editorOptionsJSON"
                        ng-model="footerCtrl.currentJson.text">
              </textarea>
            </div>
          </div>
          <div ng-switch-when="SQL" fill>
            <div ng-switch="footerCtrl.dashboard.selectedWidget.model.datasource.custom_query">
              <div ng-switch-when="true">
                <div>
                  <textarea codemirror="footerCtrl.editorOptionsSQL"
                            ng-model="footerCtrl.dashboard.selectedWidget.model.datasource.query">
                  </textarea>
                </div>
              </div>
              <div ng-switch-default>
                <div>
                  <textarea codemirror="footerCtrl.editorOptionsSQLView"
                            ng-model="footerCtrl.dashboard.selectedWidget.model.datasource.query">
                  </textarea>
                </div>
              </div>
            </div>
          </div>
          <div ng-switch-when="LOG" fill>
            <alert-log />
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

